<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Mobile Media Viewer - Fullscreen Mode</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #000;
      overflow: hidden;
      height: 100vh;
      width: 100vw;
    }

    /* Fullscreen Container */
    .fullscreen-container {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }

    .media-image {
      max-width: 100vw;
      max-height: 100vh;
      object-fit: contain;
      transition: transform 300ms ease;
      cursor: grab;
    }

    .media-image.grabbing {
      cursor: grabbing;
    }

    /* Fullscreen Controls Overlay */
    .controls-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 10000;
      transition: opacity 300ms ease;
    }

    .controls-overlay.hidden {
      opacity: 0;
    }

    /* Exit Button */
    .exit-btn {
      position: absolute;
      top: 16px;
      left: 16px;
      width: 48px;
      height: 48px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(10px);
      border: none;
      border-radius: 50%;
      color: white;
      cursor: pointer;
      pointer-events: auto;
      transition: transform 200ms;
    }

    .exit-btn:active {
      transform: scale(0.9);
    }

    /* Zoom Controls */
    .fullscreen-zoom {
      position: absolute;
      bottom: 16px;
      left: 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(10px);
      border-radius: 24px;
      padding: 8px;
      pointer-events: auto;
    }

    .zoom-btn {
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      background: transparent;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      transition: background 200ms, transform 100ms;
    }

    .zoom-btn:hover {
      background: rgba(255, 255, 255, 0.1);
    }

    .zoom-btn:active {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(0.95);
    }

    /* Zoom Level Indicator */
    .zoom-indicator {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      color: white;
      padding: 12px 20px;
      border-radius: 24px;
      font-size: 18px;
      font-weight: 600;
      pointer-events: none;
      opacity: 0;
      transition: opacity 200ms ease;
    }

    .zoom-indicator.visible {
      opacity: 1;
    }

    /* Swipe Hint */
    .swipe-hint {
      position: absolute;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(10px);
      color: white;
      padding: 8px 16px;
      border-radius: 16px;
      font-size: 13px;
      pointer-events: none;
      animation: fadeInOut 3s ease-in-out;
    }

    @keyframes fadeInOut {
      0%, 100% { opacity: 0; }
      10%, 90% { opacity: 1; }
    }

    /* Icons */
    .icon {
      width: 24px;
      height: 24px;
      stroke: currentColor;
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      fill: none;
    }

    .icon-sm {
      width: 20px;
      height: 20px;
    }

    /* Instructions Overlay (first time) */
    .instructions {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(0, 0, 0, 0.95);
      backdrop-filter: blur(20px);
      color: white;
      padding: 32px;
      border-radius: 16px;
      max-width: 90%;
      text-align: center;
      pointer-events: auto;
      z-index: 10001;
      animation: fadeIn 300ms ease-out;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translate(-50%, -50%) scale(1);
      }
    }

    .instructions h2 {
      font-size: 20px;
      margin-bottom: 16px;
    }

    .instructions-list {
      text-align: left;
      margin: 16px 0;
      line-height: 1.8;
    }

    .instructions-list li {
      margin-bottom: 8px;
      padding-left: 8px;
    }

    .got-it-btn {
      margin-top: 16px;
      padding: 12px 32px;
      background: #3B82F6;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: background 200ms, transform 100ms;
    }

    .got-it-btn:hover {
      background: #2563EB;
    }

    .got-it-btn:active {
      transform: scale(0.95);
    }

    .instructions.hidden {
      display: none;
    }
  </style>
</head>
<body>
  
  <!-- Fullscreen Container -->
  <div class="fullscreen-container" id="fullscreenContainer">
    <img 
      src="https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=1920&h=1080&fit=crop" 
      alt="Mountain Sunset"
      class="media-image"
      id="mediaImage"
    >

    <!-- Controls Overlay -->
    <div class="controls-overlay" id="controlsOverlay">
      <!-- Exit Button -->
      <button class="exit-btn" onclick="exitFullscreen()">
        <svg class="icon" viewBox="0 0 24 24">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>

      <!-- Zoom Controls -->
      <div class="fullscreen-zoom">
        <button class="zoom-btn" onclick="zoomIn()" title="Zoom In">
          <svg class="icon-sm" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            <line x1="11" y1="8" x2="11" y2="14"></line>
            <line x1="8" y1="11" x2="14" y2="11"></line>
          </svg>
        </button>
        <button class="zoom-btn" onclick="zoomOut()" title="Zoom Out">
          <svg class="icon-sm" viewBox="0 0 24 24">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            <line x1="8" y1="11" x2="14" y2="11"></line>
          </svg>
        </button>
        <button class="zoom-btn" onclick="resetZoom()" title="Reset">
          <svg class="icon-sm" viewBox="0 0 24 24">
            <polyline points="23 4 23 10 17 10"></polyline>
            <polyline points="1 20 1 14 7 14"></polyline>
            <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
          </svg>
        </button>
      </div>

      <!-- Swipe Hint -->
      <div class="swipe-hint">
        Swipe down to exit fullscreen
      </div>
    </div>

    <!-- Zoom Level Indicator -->
    <div class="zoom-indicator" id="zoomIndicator">2.0√ó</div>

    <!-- Instructions Overlay -->
    <div class="instructions" id="instructions">
      <h2>Fullscreen Controls</h2>
      <ul class="instructions-list">
        <li>üñêÔ∏è <strong>Tap</strong> anywhere to show/hide controls</li>
        <li>üîç <strong>Pinch</strong> to zoom in/out (1√ó to 5√ó)</li>
        <li>üëÜ <strong>Double-tap</strong> to zoom 2√ó</li>
        <li>‚úã <strong>Drag</strong> to pan when zoomed</li>
        <li>‚Üì <strong>Swipe down</strong> to exit fullscreen</li>
        <li>‚è™ <strong>Swipe left/right</strong> to navigate gallery</li>
      </ul>
      <button class="got-it-btn" onclick="hideInstructions()">Got it!</button>
    </div>
  </div>

  <script>
    let zoom = 1;
    let isDragging = false;
    let startX = 0;
    let startY = 0;
    let translateX = 0;
    let translateY = 0;
    let controlsTimeout = null;
    let zoomIndicatorTimeout = null;
    let lastTap = 0;

    const mediaImage = document.getElementById('mediaImage');
    const controlsOverlay = document.getElementById('controlsOverlay');
    const zoomIndicator = document.getElementById('zoomIndicator');
    const instructions = document.getElementById('instructions');
    const fullscreenContainer = document.getElementById('fullscreenContainer');

    // Show controls on interaction
    function showControls() {
      controlsOverlay.classList.remove('hidden');
      
      clearTimeout(controlsTimeout);
      controlsTimeout = setTimeout(() => {
        controlsOverlay.classList.add('hidden');
      }, 2000); // Hide after 2s in fullscreen
    }

    // Show zoom indicator
    function showZoomIndicator(value) {
      zoomIndicator.textContent = value.toFixed(1) + '√ó';
      zoomIndicator.classList.add('visible');
      
      clearTimeout(zoomIndicatorTimeout);
      zoomIndicatorTimeout = setTimeout(() => {
        zoomIndicator.classList.remove('visible');
      }, 1000);
    }

    // Initialize
    showControls();

    // Mouse/touch events for dragging
    mediaImage.addEventListener('mousedown', startDrag);
    mediaImage.addEventListener('touchstart', startDrag, { passive: false });
    document.addEventListener('mousemove', drag);
    document.addEventListener('touchmove', drag, { passive: false });
    document.addEventListener('mouseup', endDrag);
    document.addEventListener('touchend', endDrag);

    // Single tap to toggle controls
    fullscreenContainer.addEventListener('click', (e) => {
      if (!isDragging && e.target === fullscreenContainer || e.target === mediaImage) {
        if (controlsOverlay.classList.contains('hidden')) {
          showControls();
        } else {
          controlsOverlay.classList.add('hidden');
        }
      }
    });

    // Double tap to zoom
    mediaImage.addEventListener('click', (e) => {
      const currentTime = new Date().getTime();
      const tapLength = currentTime - lastTap;
      if (tapLength < 300 && tapLength > 0) {
        e.stopPropagation();
        if (zoom === 1) {
          zoomTo(2);
        } else {
          resetZoom();
        }
      }
      lastTap = currentTime;
    });

    // Touch events for pinch zoom
    let initialDistance = 0;
    let initialZoom = 1;
    
    fullscreenContainer.addEventListener('touchstart', (e) => {
      if (e.touches.length === 2) {
        e.preventDefault();
        const touch1 = e.touches[0];
        const touch2 = e.touches[1];
        initialDistance = getDistance(touch1, touch2);
        initialZoom = zoom;
      }
    }, { passive: false });

    fullscreenContainer.addEventListener('touchmove', (e) => {
      if (e.touches.length === 2) {
        e.preventDefault();
        const touch1 = e.touches[0];
        const touch2 = e.touches[1];
        const newDistance = getDistance(touch1, touch2);
        const scale = newDistance / initialDistance;
        zoomTo(Math.max(1, Math.min(5, initialZoom * scale)), false);
      }
    }, { passive: false });

    function getDistance(touch1, touch2) {
      const dx = touch1.clientX - touch2.clientX;
      const dy = touch1.clientY - touch2.clientY;
      return Math.sqrt(dx * dx + dy * dy);
    }

    function startDrag(e) {
      if (e.touches && e.touches.length === 2) return; // Ignore if pinching
      
      if (zoom === 1) return;
      isDragging = true;
      mediaImage.classList.add('grabbing');
      
      const clientX = e.touches ? e.touches[0].clientX : e.clientX;
      const clientY = e.touches ? e.touches[0].clientY : e.clientY;
      
      startX = clientX - translateX;
      startY = clientY - translateY;
      
      showControls();
    }

    function drag(e) {
      if (!isDragging) return;
      e.preventDefault();
      
      const clientX = e.touches ? e.touches[0].clientX : e.clientX;
      const clientY = e.touches ? e.touches[0].clientY : e.clientY;
      
      translateX = clientX - startX;
      translateY = clientY - startY;
      
      updateTransform();
    }

    function endDrag() {
      isDragging = false;
      mediaImage.classList.remove('grabbing');
    }

    function updateTransform() {
      mediaImage.style.transform = `scale(${zoom}) translate(${translateX / zoom}px, ${translateY / zoom}px)`;
    }

    function zoomIn() {
      zoomTo(Math.min(zoom * 1.5, 5));
    }

    function zoomOut() {
      zoomTo(Math.max(zoom / 1.5, 1));
    }

    function zoomTo(value, animate = true) {
      zoom = value;
      if (zoom === 1) {
        translateX = 0;
        translateY = 0;
      }
      updateTransform();
      showZoomIndicator(zoom);
      showControls();
    }

    function resetZoom() {
      zoomTo(1);
    }

    function exitFullscreen() {
      if (confirm('Exit fullscreen mode?')) {
        window.history.back();
      }
    }

    function hideInstructions() {
      instructions.classList.add('hidden');
      showControls();
    }

    // Swipe down to exit
    let swipeStartY = 0;
    fullscreenContainer.addEventListener('touchstart', (e) => {
      if (e.touches.length === 1 && zoom === 1) {
        swipeStartY = e.touches[0].clientY;
      }
    });

    fullscreenContainer.addEventListener('touchend', (e) => {
      if (zoom === 1 && swipeStartY > 0) {
        const swipeEndY = e.changedTouches[0].clientY;
        const swipeDistance = swipeEndY - swipeStartY;
        
        if (swipeDistance > 100 && swipeStartY < 100) {
          exitFullscreen();
        }
      }
      swipeStartY = 0;
    });

    // Mouse move to show controls
    document.addEventListener('mousemove', showControls);
    document.addEventListener('touchstart', showControls);

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        exitFullscreen();
      } else if (e.key === '+' || e.key === '=') {
        zoomIn();
      } else if (e.key === '-') {
        zoomOut();
      } else if (e.key === '0') {
        resetZoom();
      }
    });
  </script>

</body>
</html>



